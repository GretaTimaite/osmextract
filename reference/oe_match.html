<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Match input place with a url — oe_match • osmextract</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Match input place with a url — oe_match" />
<meta property="og:description" content="This function is used to match an input place with the URL of a .osm.pbf
file (and its file-size, if present). The URLs are stored in several
provider's databases. See oe_providers() and examples." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">osmextract</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/osmextract.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/providers.html">Add new OpenStreetMap providers</a>
    </li>
    <li>
      <a href="../articles/providers_comparisons.html">Comparing the supported OSM providers</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/osmextract/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Match input place with a url</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/osmextract/blob/master/R/match.R'><code>R/match.R</code></a></small>
    <div class="hidden name"><code>oe_match.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function is used to match an input <code>place</code> with the URL of a <code>.osm.pbf</code>
file (and its file-size, if present). The URLs are stored in several
provider's databases. See <code><a href='oe_providers.html'>oe_providers()</a></code> and examples.</p>
    </div>

    <pre class="usage"><span class='fu'>oe_match</span><span class='op'>(</span><span class='va'>place</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for default</span>
<span class='fu'>oe_match</span><span class='op'>(</span><span class='va'>place</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for sf</span>
<span class='fu'>oe_match</span><span class='op'>(</span><span class='va'>place</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for sfc</span>
<span class='fu'>oe_match</span><span class='op'>(</span><span class='va'>place</span>, provider <span class='op'>=</span> <span class='st'>"geofabrik"</span>, level <span class='op'>=</span> <span class='cn'>NULL</span>, quiet <span class='op'>=</span> <span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for numeric</span>
<span class='fu'>oe_match</span><span class='op'>(</span><span class='va'>place</span>, provider <span class='op'>=</span> <span class='st'>"geofabrik"</span>, quiet <span class='op'>=</span> <span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for character</span>
<span class='fu'>oe_match</span><span class='op'>(</span>
  <span class='va'>place</span>,
  provider <span class='op'>=</span> <span class='st'>"geofabrik"</span>,
  quiet <span class='op'>=</span> <span class='cn'>FALSE</span>,
  match_by <span class='op'>=</span> <span class='st'>"name"</span>,
  max_string_dist <span class='op'>=</span> <span class='fl'>1</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>place</th>
      <td><p>Description of the geographical area that should be matched with
a <code>.osm.pbf</code> file through the chosen <code>provider</code>. Can be either a length-1
character vector, an <code>sf</code> or <code>sfc</code> object, or a numeric vector of
coordinates with length 2. In the last case, it is assumed that the EPSG
code is 4326 specified as c(LON, LAT), while you can use any CRS with an
<code>sf</code> or <code>sfc</code> object. See Details and examples in <code>oe_match()</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments passed to other methods</p></td>
    </tr>
    <tr>
      <th>provider</th>
      <td><p>Which provider should be used to download the data? Available
providers can be found with the following command: <code><a href='oe_providers.html'>oe_providers()</a></code>. For
<code><a href='oe_get.html'>oe_get()</a></code> and <code>oe_match()</code>, if <code>place</code> is equal to <code>ITS Leeds</code>, then
<code>provider</code> is set equal to <code>test</code>. This is just for simple examples and
internal tests.</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>An integer representing the desired hierarchical level in case
of spatial matching. For the <code>geofabrik</code> provider, for example, <code>1</code>
corresponds with continent-level datasets, <code>2</code> for countries, <code>3</code>
corresponds to regions and <code>4</code> to subregions. Hence, we could approximately
say that smaller administrative units correspond to bigger levels. If
<code>NULL</code>, the default, the <code>oe_*</code> functions will select the highest available
level. See Details and Examples in <code>oe_match()</code>.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Boolean. If <code>FALSE</code>, the function prints informative messages.
Starting from <code>sf</code> version
<a href='https://r-spatial.github.io/sf/news/index.html#version-0-9-6-2020-09-13'>0.9.6</a>,
if <code>quiet</code> is equal to <code>FALSE</code>, then vectortranslate operations will
display a progress bar.</p></td>
    </tr>
    <tr>
      <th>match_by</th>
      <td><p>Which column of the provider's database should be used for
matching the input <code>place</code> with a <code>.osm.pbf</code> file? The default is <code>"name"</code>.
Check Details and Examples in <code>oe_match()</code> to understand how this parameter
works. Ignored if <code>place</code> is not a character vector since the matching is
performed through a spatial operation.</p></td>
    </tr>
    <tr>
      <th>max_string_dist</th>
      <td><p>Numerical value greater or equal than 0. What is the
maximum distance in fuzzy matching (i.e. Approximate String Distance, see
<code><a href='https://rdrr.io/r/utils/adist.html'>adist()</a></code>) between input <code>place</code> and <code>match_by</code> column to tolerate before
testing alternative providers or looking for geographical matching with
Nominatim API? This parameter is set equal to 0 if <code>match_by</code> is equal to
<code>iso3166_1_alpha2</code> or <code>iso3166_2</code>. Check Details and Examples in
<code>oe_match()</code> to understand why this parameter is important. Ignored if
<code>place</code> is not a character vector since the matching is performed through a
spatial operation.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with two elements, named <code>url</code> and <code>file_size</code>. The first
element is the URL of the <code>.osm.pbf</code> file associated with the input
<code>place</code>, while the second element is the size of the file in bytes (which
may be <code>NULL</code> or <code>NA</code>)</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>If the input place is specified as a spatial object (either <code>sf</code> or <code>sfc</code>),
then the function will return a geographical area that completely contains
the object (or an error). The argument <code>level</code> (which must be specified as
an integer between 1 and 4, extreme values included) is used to select
between multiple geographically nested areas. We could roughly say that
smaller administrative units correspond to higher levels. Check the help
page of the chosen provider for more details on <code>level</code> field. By default,
<code>level = NULL</code>, which means that <code>oe_match()</code> will return the area
corresponding to the highest available level. If there is no geographical
area at the desired level, then the function will return an error. If there
are multiple areas at the same <code>level</code> intersecting the input place, then
the function will return the area whose centroid is closest to the input
place.</p>
<p>If the input place is specified as a character vector and there are
multiple plausible matches between the input place and the <code>match_by</code>
column, then the function will return a warning and it will select the
first match. See Examples. On the other hand, if the approximate string
distance between the input <code>place</code> and the best match in <code>match_by</code> column
is greater than <code>max_string_dist</code>, then the function will look for exact
matches (i.e. <code>max_string_dist = 0</code>) in the other supported providers. If
it finds an exact match, then it will return the corresponding URL.
Otherwise, if <code>match_by</code> is equal to <code>"name"</code>, then it will try to
geolocate the input <code>place</code> using the <a href='https://nominatim.org/release-docs/develop/api/Overview/'>Nominatim API</a>, and then it
will perform a spatial matching operation (see Examples and introductory
vignette), while, if <code>match_by != "name"</code>, then it will return an error.</p>
<p>The fields <code>iso3166_1_alpha2</code> and <code>iso3166_2</code> are used by Geofabrik
provider to perform matching operations using <a href='https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2'>ISO 3166-1 alpha-2</a> and <a href='https://en.wikipedia.org/wiki/ISO_3166-2'>ISO 3166-2</a> codes. See
<a href='geofabrik_zones.html'>geofabrik_zones</a> for more details.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='oe_providers.html'>oe_providers()</a></code> and <code><a href='oe_match_pattern.html'>oe_match_pattern()</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andrea Gilardi, Robin Lovelace.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


